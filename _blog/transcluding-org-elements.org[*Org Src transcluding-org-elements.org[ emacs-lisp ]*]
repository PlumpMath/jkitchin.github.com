(defvar *transclude* t "Put overlays on or not")
(setq *transclude* t)

(org-link-set-parameters
 "transclude"
 :face '(:background "gray80")
 :follow
 :keymap 
 :help-echo "Transcluded element. Click to see link"
 :activate-func (lambda (start end path bracketp)
		  (if *transclude*
		      (let ((ov (make-overlay start end))
			    el disp)
			(ov-put ov 'transclude t)
			(save-window-excursion
			  (org-open-link-from-string path)
			  (setq el (org-element-context))
			  (setq disp (buffer-substring
				      (org-element-property :begin el)
				      (- (org-element-property :end el)
					 (or (org-element-property :post-blank el) 0))))
			  (ov-put ov 'display disp)))
		    (ov-clear 'transclude 'any start end))))
