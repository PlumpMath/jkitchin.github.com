(make-process
 :name "*mongo*"
 :buffer "*Mongo*"
 :command '("mongo"))

(setq mp (start-process "mongo" "*Mongo*" "mongo"))

(defun keep-output (process output)
  (setq kept output))

(setq kept nil)

(set-process-filter mp 'keep-output)

(process-send-string mp "show dbs\n")

(message kept)





;; seems to quit
(process-send-eof mp)
