---
title: Some of this, sum of that
date: 2013/02/02 09:00:00
updated: 2013/02/27 14:44:46
categories: miscellaneous, recursive
---


<p>
<a href="http://matlab.cheme.cmu.edu/2012/05/29/some-of-this-sum-of-that/" >Matlab plot</a>
</p>

<p>
Python provides a sum function to compute the sum of a list. However, the sum function does not work on every arrangement of numbers, and it certainly does not work on nested lists. We will solve this problem with recursion.
</p>

<p>
Here is a simple example.
</p>

<div class="org-src-container">

<pre class="src src-python">v = [1, 2, 3, 4, 5, 6, 7, 8, 9] <span style="color: #ff0000; font-weight: bold;"># a list</span>
<span style="color: #8b0000;">print</span> sum(v)

v = (1, 2, 3, 4, 5, 6, 7, 8, 9)  <span style="color: #ff0000; font-weight: bold;"># a tuple</span>
<span style="color: #8b0000;">print</span> sum(v)
</pre>
</div>

<pre class="example">
45
45
</pre>

<p>
If you have data in a dictionary, sum works by default on the keys. You can give the sum function the values like this.
</p>

<div class="org-src-container">

<pre class="src src-python">v = {<span style="color: #228b22;">'a'</span>:1, <span style="color: #228b22;">'b'</span>:3, <span style="color: #228b22;">'c'</span>:4}
<span style="color: #8b0000;">print</span> sum(v.values())
</pre>
</div>

<pre class="example">
8
</pre>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Nested lists</h2>
<div class="outline-text-2" id="text-1">
<p>
Suppose now we have nested lists. This kind of structured data might come up if you had grouped several things together. For example, suppose we have 5 departments, with 1, 5, 15, 7 and 17 people in them, and in each department they are divided into groups.
</p>

<p>
Department 1: 1 person
Department 2: group of 2 and group of 3
Department 3: group of 4 and 11, with a subgroups of 5 and 6 making
              up the group of 11.
Department 4: 7 people
Department 5: one group of 8 and one group of 9.
</p>

<p>
We might represent the data like this nested list. Now, if we want to compute the total number of people, we need to add up each group. We cannot simply sum the list, because some elements are single numbers, and others are lists, or lists of lists. We need to recurse through each entry until we get down to a number, which we can add to the running sum. 
</p>
<div class="org-src-container">

<pre class="src src-python">v = [1, 
    [2, 3],
    [4, [5, 6]],
    7,
    [8,9]]

<span style="color: #8b0000;">def</span> recursive_<span style="color: #8b0000;">sum</span>(X):
    <span style="color: #228b22;">'compute sum of arbitrarily nested lists'</span>
    s = 0 <span style="color: #ff0000; font-weight: bold;"># initial value of the sum</span>

    <span style="color: #8b0000;">for</span> i <span style="color: #8b0000;">in</span> <span style="color: #8b0000;">range</span>(len(X)):
        <span style="color: #8b0000;">import</span> types  <span style="color: #ff0000; font-weight: bold;"># we use this to test if we got a number</span>
        <span style="color: #8b0000;">if</span> <span style="color: #8b0000;">isinstance</span>(X[i], (types.IntType,
                             types.LongType,
                             types.FloatType,
                             types.ComplexType)):
            <span style="color: #ff0000; font-weight: bold;"># this is the terminal step</span>
            s += X[i]
        <span style="color: #8b0000;">else:</span>
            <span style="color: #ff0000; font-weight: bold;"># we did not get a number, so we recurse</span>
            s += recursive_<span style="color: #8b0000;">sum</span>(X[i])
    <span style="color: #8b0000;">return</span> s

<span style="color: #8b0000;">print</span> recursive_<span style="color: #8b0000;">sum</span>(v)
<span style="color: #8b0000;">print</span> recursive_<span style="color: #8b0000;">sum</span>([1,2,3,4,5,6,7,8,9]) <span style="color: #ff0000; font-weight: bold;"># test on non-nested list</span>
</pre>
</div>

<pre class="example">
45
45
</pre>

<p>
In <a href="http://matlab.cheme.cmu.edu/2012/05/28/lather-rinse-and-repeat/" >Post 1970</a> we examined recursive functions that could be replaced by loops. Here we examine a function that can only work with recursion because the nature of the nested data structure is arbitrary. There are arbitary branches and depth in the data structure. Recursion is nice because you do not have to define that structure in advance.
</p>
</div>
</div>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/02/02/Some-of-this,-sum-of-that.org">org-mode source</a><p>