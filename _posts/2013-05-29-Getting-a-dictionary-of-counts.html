---
title: Getting a dictionary of counts
date: 2013/05/29 20:18:27
updated: 2013/05/29 20:20:50
categories: programming
tags: 
---


<p>
I frequently want to take a list and get a dictionary of keys that have the count of each element in the list. Here is how I have typically done this countless times in the past. 
</p>

<div class="org-src-container">

<pre class="src src-python">L = [<span style="color: #228b22;">'a'</span>, <span style="color: #228b22;">'a'</span>, <span style="color: #228b22;">'b'</span>,<span style="color: #228b22;">'d'</span>, <span style="color: #228b22;">'e'</span>, <span style="color: #228b22;">'b'</span>, <span style="color: #228b22;">'e'</span>, <span style="color: #228b22;">'a'</span>]

d = {}
<span style="color: #8b0000;">for</span> el <span style="color: #8b0000;">in</span> L:
    <span style="color: #8b0000;">if</span> el <span style="color: #8b0000;">in</span> d:
        d[el] += 1
    <span style="color: #8b0000;">else:</span>
        d[el] = 1

<span style="color: #8b0000;">print</span> d
</pre>
</div>

<pre class="example">
{'a': 3, 'b': 2, 'e': 2, 'd': 1}
</pre>

<p>
That seems like too much code, and that there must be a list comprehension approach combined with a dictionary constructor. 
</p>

<div class="org-src-container">

<pre class="src src-python">L = [<span style="color: #228b22;">'a'</span>, <span style="color: #228b22;">'a'</span>, <span style="color: #228b22;">'b'</span>,<span style="color: #228b22;">'d'</span>, <span style="color: #228b22;">'e'</span>, <span style="color: #228b22;">'b'</span>, <span style="color: #228b22;">'e'</span>, <span style="color: #228b22;">'a'</span>]

<span style="color: #8b0000;">print</span> dict((el,L.count(el)) <span style="color: #8b0000;">for</span> el <span style="color: #8b0000;">in</span> L)
</pre>
</div>

<pre class="example">
{'a': 3, 'b': 2, 'e': 2, 'd': 1}
</pre>

<p>
Wow, that is a lot simpler! I suppose for large lists this might be slow, since count must look through the list for each element, whereas the longer code looks at each element once, and does one conditional analysis.
</p>

<p>
Here is another example of much shorter and cleaner code. 
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8b0000;">from</span> collections <span style="color: #8b0000;">import</span> Counter
L = [<span style="color: #228b22;">'a'</span>, <span style="color: #228b22;">'a'</span>, <span style="color: #228b22;">'b'</span>,<span style="color: #228b22;">'d'</span>, <span style="color: #228b22;">'e'</span>, <span style="color: #228b22;">'b'</span>, <span style="color: #228b22;">'e'</span>, <span style="color: #228b22;">'a'</span>]
<span style="color: #8b0000;">print</span> Counter(L)
<span style="color: #8b0000;">print</span> Counter(L)[<span style="color: #228b22;">'a'</span>]
</pre>
</div>

<pre class="example">
Counter({'a': 3, 'b': 2, 'e': 2, 'd': 1})
3
</pre>
<p>Copyright (C) 2013 by John Kitchin. See the <a href="/copying.html">License</a> for information about copying.<p><p><a href="/org/2013/05/29/Getting-a-dictionary-of-counts.org">org-mode source</a><p>